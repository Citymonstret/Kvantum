buildscript {
    repositories {
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
        classpath "gradle.plugin.nl.javadude.gradle.plugins:license-gradle-plugin:0.13.1"
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '3.5'
}

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'idea'
apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: "com.github.hierynomus.license"

group = 'com.github.intellectualsites'
version = 'BETA-1.0.0'

description = """"""

sourceCompatibility = 1.8
targetCompatibility = 1.8

license {
    header rootProject.file('HEADER')
}

repositories {
    maven { url "https://jitpack.io" }
    maven { url "http://repo.maven.apache.org/maven2" }
    flatDir {
        dirs 'libs'
    }
}

jar {
    manifest {
        attributes 'Implementation-Title': 'IntellectualServer',
                'Implementation-Version': version,
                'Main-Class': 'com.github.intellectualsites.iserver.IntellectualServerMain'
    }
}

task writeVersionToFile << {
    File file = new File(projectDir, "version.txt")
    new File(projectDir, "old-version.txt").text = file.text
    file.text = version
}

dependencies {
    compileOnly 'org.projectlombok:lombok:1.16.18'
    testCompile 'junit:junit:4.12'
    compile group: 'com.cedarsoftware', name: 'json-io', version: '2.9.3'
    // compile group: 'org.yaml', name: 'snakeyaml', version: '1.14'
    compile group: 'org.xerial', name: 'sqlite-jdbc', version: '3.8.7'
    compile group: 'org.fusesource.jansi', name: 'jansi', version: '1.13'
    compile name: 'JCDP-1.25-win'
    compile group: 'com.beust', name: 'jcommander', version: '1.48'
    compile project(":ServerAPI")
    compile project(":Crush")
}
